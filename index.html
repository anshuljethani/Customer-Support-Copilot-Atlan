<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Atlan Support Dashboard</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <div class="app-container">
        <!-- Sidebar -->
        <nav class="sidebar">
            <div class="sidebar-header">
                <h2><i class="fas fa-cube"></i> Atlan Challenge</h2>
            </div>
            <ul class="sidebar-menu">
                <li class="menu-item active" data-page="dashboard">
                    <i class="fas fa-chart-line"></i>
                    <span>Dashboard</span>
                </li>
                <li class="menu-item" data-page="chat">
                    <i class="fas fa-robot"></i>
                    <span>AI Agent</span>
                </li>
            </ul>
        </nav>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Dashboard Page -->
            <div id="dashboard-page" class="page active">
                <div class="page-header">
                    <h1>Support Tickets Dashboard</h1>
                    <button class="btn btn-primary" id="upload-btn">
                        <i class="fas fa-plus"></i>
                        Upload JSON
                    </button>
                </div>

                <!-- Filters -->
                <div class="filters-container">
                    <div class="filter-group">
                        <label for="priority-filter">Priority:</label>
                        <select id="priority-filter">
                            <option value="">All Priorities</option>
                            <option value="P0">P0</option>
                            <option value="P1">P1</option>
                            <option value="P2">P2</option>
                        </select>
                    </div>
                    <div class="filter-group">
                        <label for="sentiment-filter">Sentiment:</label>
                        <select id="sentiment-filter">
                            <option value="">All Sentiments</option>
                            <option value="Confused">Confused</option>
                            <option value="Curious">Curious</option>
                            <option value="Anxious">Anxious</option>
                            <option value="Hopeful">Hopeful</option>
                            <option value="Frustrated">Frustrated</option>
                            <option value="Urgent">Urgent</option>
                        </select>
                    </div>
                    <div class="filter-group">
                        <label for="topic-filter">Topic:</label>
                        <select id="topic-filter">
                            <option value="">All Topics</option>
                            <option value="How-to">How-to</option>
                            <option value="Product">Product</option>
                            <option value="Connector">Connector</option>
                            <option value="Lineage">Lineage</option>
                            <option value="API/SDK">API/SDK</option>
                            <option value="SSO">SSO</option>
                            <option value="Glossary">Glossary</option>
                            <option value="Best practices">Best practices</option>
                            <option value="Sensitive data">Sensitive data</option>
                            <option value="Integrations">Integrations</option>
                            <option value="Errors">Errors</option>
                            <option value="Others">Others</option>
                        </select>
                    </div>
                    <div class="filter-group">
                        <label for="keyword-search">Keywords:</label>
                        <input type="text" id="keyword-search" placeholder="Search keywords...">
                    </div>
                    <button class="btn btn-secondary" id="clear-filters">Clear Filters</button>
                </div>

                <!-- Tickets Table -->
                <div class="table-container">
                    <table class="tickets-table">
                        <thead>
                            <tr>
                                <th>ID</th>
                                <th>Subject</th>
                                <th>Body</th>
                                <th>Priority</th>
                                <th>Topics</th>
                                <th>Keywords</th>
                                <th>Sentiment</th>
                                <th>Created At</th>
                            </tr>
                        </thead>
                        <tbody id="tickets-tbody">
                            <!-- Tickets will be loaded here -->
                        </tbody>
                    </table>
                </div>

                <!-- Pagination -->
                <div class="pagination-container">
                    <button class="btn btn-secondary" id="prev-page" disabled>
                        <i class="fas fa-chevron-left"></i>
                        Previous
                    </button>
                    <div class="page-numbers" id="page-numbers">
                        <!-- Page numbers will be generated here -->
                    </div>
                    <button class="btn btn-secondary" id="next-page">
                        Next
                        <i class="fas fa-chevron-right"></i>
                    </button>
                </div>

                <!-- Visual Dashboard -->
                <div class="visual-dashboard">
                    <div class="dashboard-header">
                        <h2><i class="fas fa-chart-bar"></i> Analytics Dashboard</h2>
                        <p>Visual insights into your support tickets</p>
                    </div>
                    
                    <div class="charts-grid">
                        <!-- Priority Distribution Chart -->
                        <div class="chart-container">
                            <div class="chart-header">
                                <h3><i class="fas fa-exclamation-triangle"></i> Priority Distribution</h3>
                                <p>Breakdown of tickets by priority level</p>
                            </div>
                            <div class="chart-content">
                                <canvas id="priorityChart"></canvas>
                            </div>
                        </div>

                        <!-- Sentiment Analysis Chart -->
                        <div class="chart-container">
                            <div class="chart-header">
                                <h3><i class="fas fa-heart"></i> Sentiment Analysis</h3>
                                <p>Customer sentiment distribution</p>
                            </div>
                            <div class="chart-content">
                                <canvas id="sentimentChart"></canvas>
                            </div>
                        </div>

                        <!-- Topics Distribution Chart -->
                        <div class="chart-container">
                            <div class="chart-header">
                                <h3><i class="fas fa-tags"></i> Topics Distribution</h3>
                                <p>Most common ticket topics</p>
                            </div>
                            <div class="chart-content">
                                <canvas id="topicsChart"></canvas>
                            </div>
                        </div>

                        <!-- Timeline Chart -->
                        <div class="chart-container chart-wide">
                            <div class="chart-header">
                                <h3><i class="fas fa-calendar-alt"></i> Tickets Timeline</h3>
                                <p>Tickets created over time</p>
                            </div>
                            <div class="chart-content">
                                <canvas id="timelineChart"></canvas>
                            </div>
                        </div>

                        <!-- Priority vs Sentiment Matrix -->
                        <div class="chart-container chart-wide">
                            <div class="chart-header">
                                <h3><i class="fas fa-th"></i> Priority vs Sentiment Matrix</h3>
                                <p>Relationship between priority and customer sentiment</p>
                            </div>
                            <div class="chart-content">
                                <canvas id="matrixChart"></canvas>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Chat Page -->
            <div id="chat-page" class="page">
                <div class="page-header">
                    <h1>AI Agent</h1>
                    <div class="chat-status">
                        <span class="status-indicator" id="chat-status"></span>
                        <span id="status-text">Ready</span>
                    </div>
                </div>

                <div class="chat-container">
                    <div class="chat-messages" id="chat-messages">
                        <div class="message bot-message">
                            <div class="message-content">
                                <i class="fas fa-robot"></i>
                                <p>Hello! I'm your AI assistant. How can I help you today?</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="chat-input-container">
                        <div class="chat-input-wrapper">
                            <input type="text" id="chat-input" placeholder="Type your message here..." maxlength="1000">
                            <button class="btn btn-primary" id="send-btn">
                                <i class="fas fa-paper-plane"></i>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- File Upload Modal -->
    <div id="upload-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Upload JSON File</h3>
                <button class="close-btn" id="close-modal">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="file-upload-area" id="file-upload-area">
                    <i class="fas fa-cloud-upload-alt"></i>
                    <p>Drag and drop your JSON file here, or click to browse</p>
                    <input type="file" id="file-input" accept=".json" style="display: none;">
                </div>
                <div class="file-info" id="file-info" style="display: none;">
                    <p><strong>Selected file:</strong> <span id="file-name"></span></p>
                    <p><strong>Size:</strong> <span id="file-size"></span></p>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" id="cancel-upload">Cancel</button>
                <button class="btn btn-primary" id="confirm-upload" disabled>Upload & Process</button>
            </div>
        </div>
    </div>

    <!-- Processing Popup -->
    <div id="processing-popup" class="processing-popup">
        <div class="processing-content">
            <div class="spinner"></div>
            <div class="processing-text">
                <h4>Processing Tickets</h4>
                <p>Please wait while we process your JSON file...</p>
            </div>
        </div>
    </div>

    <!-- Ticket Details Modal -->
    <div id="ticket-modal" class="modal">
        <div class="modal-content ticket-modal">
            <div class="modal-header">
                <h3>Ticket Details</h3>
                <button class="close-btn" id="close-ticket-modal">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body" id="ticket-details-body">
                <!-- Ticket details will be populated here -->
            </div>
        </div>
    </div>

    <!-- Notification Toast -->
    <div id="notification" class="notification">
        <div class="notification-content">
            <i class="fas fa-check-circle"></i>
            <span id="notification-text"></span>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>
